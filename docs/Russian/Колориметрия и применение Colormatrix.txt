Колориметрия- физическая наука о методах измерения и количественного выражения цвета, а также совокупность таких методов. В колориметрии (науке о цветах) цвет определяется тремя величинами: яркостью, цветовым тоном и насыщенностью.

ColorMatrix корректирует цвета потоков MPEG-2 DVD. Более корректно, многие MPEG-2 потоки используют слегка отличающиеся коэффициенты (называемые Rec.709) для хранения цветовой информации, чем это делают подпрограммы преобразования цвета AviSynth или XviD/DivX декодеры (называемые Rec.601), с тем результатом, что клипы DivX/XviD или MPEG-2, закодированные TMPGEnc/QuEnc отображатся со слегка смещенными цветами (что выглядит подобно небольщой разницы в яркости). Это может быть проверено путем открытия потока MPEG-2 прямо в VirtualDubMod.

Преобразования от RGB до YUV и наоборот есть многократные установки коэффициентов, которые могут использоваться. Самые общие - Rec.709, FCC, Rec.601(иначе SMPTE 170M или ITU-R BT.470-2), и SMPTE 240M. Цель ColorMatrix состоит в том, чтобы повторно вычислить значения видео YUV, которое было преобразовано из RGB. Причина этих преобразований полезна,поскольку потоки MPEG-2 типично используют Rec.709, тогда как большинство программного обеспечения (декодерыXviD/DivX, и т.д ...) принимают Rec.601.Для этих целей и служит ColorMatrix, чтобы преобразовать видео от Rec.709 до Rec.601 и затем передать это к декодеру. Другой пример - то, если Вы фиксируете видео с программным обеспечением, которое использует Rec.601 и затем хотите закодировать это к MPEG-2, используя кодирующие устройства, которое принимает Rec.709. 
Помимо пребразований различных режимов ColorMatrix также имеет способность сделать расширение диапазона и сокращение ([16,235/240]-> [0,255] или [0,255]-> [16,235/240]), как часть преобразования колориметрии или самостоятельно

 Синтаксис

ColorMatrix (clip, string "mode", int "source", int "dest", int "clamp", bool "interlaced", bool "inputFR", bool "outputFR", bool "hints", string "d2v", bool "debug", int "threads", int "thrdmthd", int "opt")

С подробным описанием параметров настроек ColorMatrix можно познакомится по адресу:
 
http://avisynth.org.ru/docs/russian/externalfilters/colormatrix.htm

Рекомендации специалистов по колориметрии:

"clamp=0 всегда должно присутствовать. За сужение диапазона отвечает комбинация inputFR и outputFR, которые могут сузить диапазон, но не обрезают его, как делает clamp <> 0. При перекодировании с ДВД мы рассчитываем, что в оригинале уже был диапазон ТВ (впрочем, это всегда легко проверить) и просто ставим clamp=0, пропустив inputFR и outputFR. Тогда диапазон остается без изменений. При перекодировании с других источников (включая HD), где вполне может быть полный диапазон, мы ставим inputFR в соответствии с диапазоном источника (опуская outputFR, поскольку по умолчанию outputFR = false). Проверяем диапазон с помощью СolorYUV(analyze=true) по значениям Loose Min/Max.Эту строку можно открыть в пресете info:

ColorMatrix(mode="Rec.709->Rec.601", inputFR=false, clamp=0) #корректировка цветовой шкалы если проверка показывает 16-232

ColorMatrix(mode="Rec.709->Rec.601", inputFR=true, clamp=0) #корректировка цветовой шкалы если проверка показывает 0-255

Вывод: ColorMatrix(hints=true, interlaced=false/true, threads=0, clamp=0) является почти лучшим вариантом при перекодировании DVD в XviD/DivX. Колориметрия будет преобразована из того, что DGIndex обнаружит в DVD (по умолчанию это 601, но может быть и SMPTE 240M и даже 709), в 601-ю. Диапазон останется без изменений.
Здесь явно предполагается, что мы будем скармливать XviD цветовому пространству YV12 (скажем, с Fast recompress в VD). Что неплохо, просто надо помнить, что интерлейсный YV12 фундаментально дефективен, и проблемы с хромой неизбежны не только при преобразовании YV12 -> YUY2, но и при вычислениях в ColorMatrix.
С этой точки зрения, я бы все-таки скармливал кодировщику YUY2, но делал преобразование не с ConvertToYUY2, а AutoYUY2. AutoYUY2 - единственный известный мне способ хорошей обработки интерлейсного YV12. В этом случае interlaced=false/true следует просто выкинуть из ColorMatrix. Но поскольку AutoYUY2 будет стоять перед ColorMatrix, то hints перестанут работать. Тут уже надо использовать либо опцию d2v, либо явно задавать колориметрию источника.
Перекодирование из HD в DVD еще интересней с точки зрения колориметрии. Я предложил мои соображения здесь:
ColorMatrix(mode="Rec.709->Rec.601", clamp=0) - с clamp=0 полностью согласен, но тогда надо выяснить диапазон на входе, с помощью coloryuv(analyze=true). Казалось бы, раз на выходе должно быть 16-235, то зачем clamp=0, который запретит сужение диапазона (в старых версиях ColorMatrix диапазон сужался всегда)? Дело в том, что DVD сплошь и рядом смотрят на HDTV. Хорошие железные плееры пропускают суперчерный/супербелый к апскейлеру, который использует эту информацию в тенях и ярких местах во избежание полос. Но базовый диапазон - по-прежнему 16-235. То есть inputFR=true/false обязателен при clamp=0 - тогда мы получим и правильный общий диапазон на выходе (16-235) и выбросы в суперчерный/супербелый. inputFR=false ставим, если на входе имеем 16-235, но с выбросами в суперчерный/супербелый. Поскольку получается inputFR = outputFR (по умолчанию outputFR=false и мы его просто не ставим), то диапазон вообще не будет затронут. Если на входе 0-255, то ставим inputFR=true, и диапазон сожмется как надо (за счет того же outputFR=false по умолчанию). Если неохота морочить себе голову с проверкой диапазона на входе, тогда лучше clamp убрать (по умолчанию, clamp = 1)

 Обрезать диапазон плохо, поскольку точки вне законного ТВ диапазона на DVD в самом деле встречаются. И дело не только в артефактах кодирования. Так называемые суперчерный и супербелый встречаются в глубоких тенях и ярких участках, с целью уменьшить образование полос. При тестировании железных DVD плееров, их способность пропускать такие цвета является одним из критериев качества. Именно поэтому тестировать диапазон следует по Loose Min/Max, а не просто Min/Max. Loose Min/Max показывает диапазон с исключенными редкими выбросами."

Рекомендации:

1) для DVDRip при кодировании в формат avi кодеками DivX или XviD включать в скрипт
ColorMatrix(hints=true,clamp=0,interlaced=true) #interlaced=false для прогрессива

2) Для DVDRip-AVC такой строки в скрипте не должно быть, а в командную строку кодека х264 вписать то, что показывает DGIndex, например:
--colormatrix "bt470bg"

3) Для BDRip и HDRip при кодировании кодеком DivX или XviD в формат avi в скрипт вписать строку на основе показания DGIndexNV (ну там, как правило, другого пока не встречал) BT709:
ColorMatrix(mode="Rec.709->Rec.601", inputFR=false, clamp=0) #корректировка цветовой шкалы если проверка показывает 16-232 ( для этого в пресете 1.Info надо открыть строку:
#ColorYUV(analyze=true) # оценка диапазона входного сигнала)
или
ColorMatrix(mode="Rec.709->Rec.601", inputFR=true, clamp=0) #корректировка цветовой шкалы если проверка показывает 0-255

4) Для BDRip-AVC и HDRip-AVC при кодировании кодеком x264 вписать в командную строку
--colormatrix "bt709"
а если быть точнее, то для сохранения цветопередачи в командную строку х264 надо вписать
--colorprim "bt709" --colormatrix "bt709" --transfer "bt709"
В скрипте никаких строк с Сolormatrix не должно быть.

